<!DOCTYPE html>
<script src="code/chapter/16_game.js"></script>
<script src="code/levels.js"></script>

<link rel="stylesheet" href="css/game.css" />

<body>
  <script>
    var lives = 3;

    async function runGame(plans, Display) {
      for (let level = 0; level < plans.length; ) {
        console.log(`You have ${lives} remaining lives`);
        if (lives == 0) {
          console.log('Game over. Restarting...');
          level = 0;
          lives = 3;
          continue;
        }
        let status = await runLevel(new Level(plans[level]), Display);
        if (status == 'won') level++;
        if (status == 'lost') lives--;
      }
      console.log("You've won!");
    }

    runGame(GAME_LEVELS, DOMDisplay);
  </script>
</body>
